<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>关于Yaf的一些说明 【转自鸟哥】 | 新宇的博客 - 16890.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Yaf是我在俩年前写的一个PHP扩展的MVC框架. 开发Yaf的目的是为了解决使用框架带来的性能下降的经典矛盾. 最初要感谢百度的同仁们的信任, 以及当时各位老大的支持, 容许也敢于让我”试错”, 才让Yaf顺利的度过了”没人敢用”的阶段, 大量的百度的新的产品基于Yaf开发, 让Yaf的稳定性得到了充分的验证, 也普遍的提高了PHP应用的执行效率. 而现在, Yaf的高性能又一次在微博的应用中得">
<meta property="og:type" content="article">
<meta property="og:title" content="关于Yaf的一些说明 【转自鸟哥】">
<meta property="og:url" content="https://16890.github.io/2017/2096172599.html">
<meta property="og:site_name" content="新宇的博客 - 16890.github.io">
<meta property="og:description" content="Yaf是我在俩年前写的一个PHP扩展的MVC框架. 开发Yaf的目的是为了解决使用框架带来的性能下降的经典矛盾. 最初要感谢百度的同仁们的信任, 以及当时各位老大的支持, 容许也敢于让我”试错”, 才让Yaf顺利的度过了”没人敢用”的阶段, 大量的百度的新的产品基于Yaf开发, 让Yaf的稳定性得到了充分的验证, 也普遍的提高了PHP应用的执行效率. 而现在, Yaf的高性能又一次在微博的应用中得">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-11-08T14:13:58.656Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于Yaf的一些说明 【转自鸟哥】">
<meta name="twitter:description" content="Yaf是我在俩年前写的一个PHP扩展的MVC框架. 开发Yaf的目的是为了解决使用框架带来的性能下降的经典矛盾. 最初要感谢百度的同仁们的信任, 以及当时各位老大的支持, 容许也敢于让我”试错”, 才让Yaf顺利的度过了”没人敢用”的阶段, 大量的百度的新的产品基于Yaf开发, 让Yaf的稳定性得到了充分的验证, 也普遍的提高了PHP应用的执行效率. 而现在, Yaf的高性能又一次在微博的应用中得">
  
    <link rel="alternate" href="/atom.xml" title="新宇的博客 - 16890.github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">新宇的博客 - 16890.github.io</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">新宇的博客 - 16890.github.io</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://16890.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-20170711-Yaf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/2096172599.html" class="article-date">
  <time datetime="2017-07-11T14:25:28.000Z" itemprop="datePublished">2017-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      关于Yaf的一些说明 【转自鸟哥】
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><!--markdown-->Yaf是我在俩年前写的一个PHP扩展的MVC框架. 开发Yaf的目的是为了解决使用框架带来的性能下降的经典矛盾.</p>
<p>最初要感谢百度的同仁们的信任, 以及当时各位老大的支持, 容许也敢于让我”试错”, 才让Yaf顺利的度过了”没人敢用”的阶段, 大量的百度的新的产品基于Yaf开发, 让Yaf的稳定性得到了充分的验证, 也普遍的提高了PHP应用的执行效率.</p>
<p>而现在, Yaf的高性能又一次在微博的应用中得到了证明, 通过迁移框架到Yaf, 和一些其他优化手段, 我们成功的让新版微博的TPS提高了76%之多, 响应时间下降了近一半.</p>
<p>然而, 我也看到, 还有不少同学对Yaf有疑虑, 甚至有质疑, 有人认为”使用C写框架? 那不是回退到写CGI的时代了?”, 于是我想我有必要写一篇文章, 详细介绍下我对Yaf的一些理解.</p>
<p>首先, Yaf是一个框架, 那么大家对框架有什么感觉? 比如大家在平时使用Yii, Zend Framework的时候, 会去修改它么? 当你的一个业务基于某个框架开发完成以后, 你觉得你以后还会去修改框架代码么?</p>
<p>这就是Yaf之所以可以做成框架的一个前提条件, 那就是框架是不易变的, 一般是不需要维护的, 比如在百度使用的Yaf, 相当于Yaf 2.1.0, 虽然从2.1.0 到现在的2.1.18, 新增了一些特性, 修复了一些bug, 但是只要你的应用基于此框架开发完成了, 稳定运行了, 那你并不是一定要把框架升级到最新版.</p>
<p>第二, 大家在使用其他框架的时候, 如果要调试, 会需要去读框架代码, 并且通过在框架代码中打信息来调试么? 我想说, 这样的情况, 很少很少, 是的, 当一个开发者对某个框架特别熟悉的时候, 他清楚的知道这些框架的流程, 所以可能通过这样的方式来调试, 然而这不是必须的.</p>
<p>Yaf因为是扩展, 所以特别注意开发/调试的便利性, 它提供了插件机制, 提供了丰富的debug信息, 并且专门为命令行下的调试做了特别优化, 尽可能的在出现错误的时候, 给予更多的错误原因. 所以, 你几乎完全不需要了解框架的具体实现, 就能方便的调试.</p>
<p>还有一些同学对Yaf的实现表示担忧, 害怕引入一个扩展, 会造成一些其他问题.</p>
<p>Yaf的实现, 都是基于PHP的内核API, 你可以理解为Yaf的执行层面, 和你的PHP代码执行层面没有不同, 并且充分的注意了避免对PHP带来侵入性, 他遵守所有的安全限制, 所以在PHP内载入Yaf, 并不会带来什么问题(当然, 除非你的应用中, 有和Yaf提供的类同名的类).</p>
<p>还有一些同学, 担心, 万一Yaf出了bug怎么办? 毕竟扩展的框架, 要维护比较困难.</p>
<p>首先, Yaf有bug么? 肯定有, 就好比PHP, 它也存在很多Bug, 但是只要你触及不到, 那么你就不会触及到, 不存在开发的时候没问题, 跑的时候有问题.</p>
<p>另外, 对于Yaf的问题, 我基本上能做到快速响应, 这点现在的大量的Yaf用户应该能证明吧? 如果真正的是Yaf的bug, 我一定会立即修复. 提供Patch. 并且, 除我之外, 也有更多的人对Yaf的实现开始了解, 我相信以后Yaf会有更多的维护者.</p>
<p>另外, 还有不少同学问, 为什么Yaf没有ORM, 这里有俩方面的考虑:</p>
<p>首先, Yaf并不是万能的, 它只是解决了应用中, 最基本的一个问题, 就是框架带来的额外的性能开销, 然而这本部分的开销和你的应用实际的开销相比, 往往是很小的.</p>
<p>但是, Yaf却代表着一种精神, 就是追求简单, 追求高效, 追求:”简单可依赖”, 所以Yaf专注于实现最核心的功能, 提供最稳定的实现.</p>
<p>相比ORM, 如果要实现的很方便, 那必然会很复杂, 在当时的情况下, 实现ORM有可能会引入不稳定性</p>
<p>第二, 也是最重要的一点是PHP已经提供了对DB的一个轻度封装的PDO, 我认为直接使用PDO, 会更加简单, 更加高效, 我不希望提供一个复杂的ORM包装, 鼓励大家去抛弃简单的PDO而使用ORM. 所以, 最初的时候, Yaf并不包含ORM.</p>
<p>诚然, ORM可以提高开发效率, 尤其对于一些简单应用, 所以我想在后续的Yaf的版本中, 会考虑加入ORM, 但是那也绝对会是一个简单的ORM, 类似于Yaf的内建视图引擎: Yaf_View_Simple, 简单可依赖.</p>
<p>当然, 因为Yaf是扩展, 而大部分的虚拟主机提供商是不容许我们自己安装扩展的, 这也就限制了Yaf的应用面, 在这点上, 我想我要特别感谢SAE/BAE的同学们, 在不久的将来, SAE/BAE都会支持Yaf, 让更多的个人开发者, 也能使用Yaf.</p>
<p>Yaf相比其他的框架, 目前还是一个很年轻的东西, 虽然有一大堆热心的同学(大门, 黑馒头, 烧鸡, 等等)在和我一起努力去丰富文档, 提供实例, 但Yaf的相关辅助还却是不如其他框架丰富.</p>
<p>所以, Yaf对于完全没有用过框架的同学来说, 入门门槛会比较高一些, 但如果你已经使用过其他框架, 那么接受Yaf, 将会比你想象的简单的多.</p>
<p>最后, 我并不是说, 大家都需要使用更高性能的框架, 我只是希望Yaf能给大家提供了一条路, 给大家提供多一种选择而已.</p>
<p>“Yaf只是最快的框架, 却不是最完美的框架.”</p>
<p>我会让持续的让他越来越完美. 我也欢迎你, 和我一起, 让他变的更完美.</p>
<p>在Github上的Yaf源代码: <a href="https://github.com/laruence/php-yaf" target="_blank" rel="external">https://github.com/laruence/php-yaf</a></p>
<p>在Pecl的Yaf的发布包: <a href="http://pecl.php.net/yaf" target="_blank" rel="external">http://pecl.php.net/yaf</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://16890.github.io/2017/2096172599.html" data-id="cj9r5rotm0003qsvyxqz9vi8g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/595224148.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          故事：猫的出生理解依赖注入 控制反转
        
      </div>
    </a>
  
  
    <a href="/2017/3684926814.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">使用Nginx+Lua(OpenResty)开发高性能Web应用</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/3011901424.html">Laravel框架中的增删改查</a>
          </li>
        
          <li>
            <a href="/2017/595224148.html">故事：猫的出生理解依赖注入 控制反转</a>
          </li>
        
          <li>
            <a href="/2017/2096172599.html">关于Yaf的一些说明 【转自鸟哥】</a>
          </li>
        
          <li>
            <a href="/2017/3684926814.html">使用Nginx+Lua(OpenResty)开发高性能Web应用</a>
          </li>
        
          <li>
            <a href="/2017/3739252540.html">Redis未授权访问缺陷可轻易导致系统被黑</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 新宇<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>